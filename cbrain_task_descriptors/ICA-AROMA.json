{
    "command-line": "python /ICA-AROMA/ica-aroma-wrapper.py [OUTPUT_DIR] [INPUT_FILE] [AFFINE_FILE] [WARP_FILE] [REALIGNMENT_FILE] [MASK_FILE] [MELODIC_DIR] [FEAT_DIR] [TR_NUM] [DIMS_NUM] [DENOISING_STRATEGY]", 
    "container-image": {
        "image": "mcin/ica-aroma:latest", 
        "index": "index.docker.io", 
        "type": "docker"
    }, 
    "description": "ICA-AROMA (i.e. Independent Component Analyis-based Automatic Removal Of Motion Artifacts) is a data-driven method to identify and remove motion-related independent components from fMRI data.", 
    "groups": [
        {
            "description": "Either input a .nii.gz file or a Feat directory. The former allows running ICA-AROMA in generic mode; the latter runs it in Feat mode.", 
            "id": "input_data_group", 
            "members": [
                "infile", 
                "feat_dir"
            ], 
            "mutually-exclusive": true, 
            "name": "Input Data", 
            "one-is-required": true
        }, 
        {
            "description": "Input files used in generic mode. The realignment, affine registration, and warp files are required in this mode.", 
            "id": "generic_mode_group", 
            "members": [
                "realignment_file", 
                "affine_file", 
                "warp_file", 
                "mask_file"
            ], 
            "name": "Generic Mode Parameters"
        }, 
        {
            "description": "Optional parameters that can be specified in either mode of ICA-AROMA.", 
            "id": "optional_args_group", 
            "members": [
                "tr_num", 
                "denoising_strategy", 
                "dims_num", 
                "melodic_dir"
            ], 
            "name": "Optional Parameters"
        }
    ], 
    "inputs": [
        {
            "command-line-flag": "-out", 
            "default-value": "AROMA_output", 
            "description": "Output directory name.", 
            "id": "outdir", 
            "list": false, 
            "name": "Output directory", 
            "optional": false, 
            "type": "String", 
            "value-key": "[OUTPUT_DIR]"
        }, 
        {
            "command-line-flag": "-in", 
            "description": "Input file name of fMRI data (.nii.gz).", 
            "id": "infile", 
            "list": false, 
            "name": "Input file", 
            "optional": true, 
            "requires-inputs": [
                "realignment_file", 
                "affine_file", 
                "warp_file"
            ], 
            "type": "File", 
            "value-key": "[INPUT_FILE]"
        }, 
        {
            "command-line-flag": "-affmat", 
            "description": "File name of the mat-file describing the affine registration (e.g. FSL FLIRT) of the functional data to structural space (.mat file).", 
            "id": "affine_file", 
            "list": false, 
            "name": "Affine registration file", 
            "optional": true, 
            "requires-inputs": [
                "infile"
            ], 
            "type": "File", 
            "value-key": "[AFFINE_FILE]"
        }, 
        {
            "command-line-flag": "-warp", 
            "description": "File name of the warp-file describing the non-linear registration (e.g. FSL FNIRT) of the structural data to MNI152 space (.nii.gz format).", 
            "id": "warp_file", 
            "list": false, 
            "name": "Non-linear registration warp file", 
            "optional": true, 
            "requires-inputs": [
                "infile"
            ], 
            "type": "File", 
            "value-key": "[WARP_FILE]"
        }, 
        {
            "command-line-flag": "-mc", 
            "description": "File name of the text file containing the six (column-wise) realignment parameters time-courses derived from volume-realignment (e.g. MCFLIRT). (Usually .par format).", 
            "id": "realignment_file", 
            "list": false, 
            "name": "Realignment file", 
            "optional": true, 
            "requires-inputs": [
                "infile"
            ], 
            "type": "File", 
            "value-key": "[REALIGNMENT_FILE]"
        }, 
        {
            "command-line-flag": "-mask", 
            "description": "Input fMRI data should be masked (i.e. brain-extracted) or a specific mask has to be specified (-m, -mask) when running ICA-AROMA. Note the mask determined by FEAT is not recommended to be used; rather, a mask can be created via the Brain Extraction Tool of FSL (e.g. bet input output -f 0.3 -n -m -R). Not strictly required in generic mode. (Usually .nii.gz format.)", 
            "id": "mask_file", 
            "list": false, 
            "name": "Mask file", 
            "optional": true, 
            "requires-inputs": [
                "infile"
            ], 
            "type": "File", 
            "value-key": "[MASK_FILE]"
        }, 
        {
            "command-line-flag": "-md", 
            "description": "When you have already run MELODIC you can specify the melodic directory as additional input to avoid running MELODIC again. Note that MELODIC should have been run on the fMRI data prior to temporal filtering and after spatial smoothing. Further, unless you have a good reason for doing otherwise, we advise to run MELODIC as part of ICA-AROMA so that it runs with optimal settings. (Usually .ica extension.)", 
            "id": "melodic_dir", 
            "list": false, 
            "name": "Melodic directory", 
            "optional": true, 
            "type": "File", 
            "value-key": "[MELODIC_DIR]"
        }, 
        {
            "command-line-flag": "-feat", 
            "description": "Runs ICA-AROMA in post-FEAT mode. In this case, only the FEAT directory has to be specified, as well as an output directory. ICA-AROMA will automatically define the appropriate files, create an appropriate mask (see ICA-AROMA manual, section 4.1) and use the melodic.ica directory if available, in case \u2018MELODIC ICA data exploration\u2019 was checked in FEAT. (.feat extension.)", 
            "disables-inputs": [
                "realignment_file", 
                "affine_file", 
                "warp_file", 
                "mask_file"
            ], 
            "id": "feat_dir", 
            "list": false, 
            "name": "FEAT directory", 
            "optional": true, 
            "type": "File", 
            "value-key": "[FEAT_DIR]"
        }, 
        {
            "command-line-flag": "-tr", 
            "description": "TR in seconds. If this is not specified the TR will be extracted from the header of the fMRI file using \u2018fslinfo\u2019. In that case, make sure the TR in the header is correct!", 
            "id": "tr_num", 
            "list": false, 
            "minimum": 0, 
            "name": "TR", 
            "optional": true, 
            "type": "Number", 
            "value-key": "[TR_NUM]"
        }, 
        {
            "command-line-flag": "-dim", 
            "description": "Dimensionality reduction into a defined number of dimensions when running MELODIC (default is 0; automatic estimation).", 
            "id": "dims_num", 
            "integer": true, 
            "list": false, 
            "minimum": 0, 
            "name": "Dimensionality reduction level", 
            "optional": true, 
            "type": "Number", 
            "value-key": "[DIMS_NUM]"
        }, 
        {
            "command-line-flag": "-den", 
            "description": "Type of denoising strategy (default is nonaggr). Can be \"no\" (only classification, no denoising), \"nonaggr\" (non-aggressive denoising, i.e. partial component regression; default), \"aggr\" (aggressive denoising, i.e. full component regression), \"both\" (both aggressive and non-aggressive denoising, two outputs).", 
            "id": "denoising_strategy", 
            "list": false, 
            "name": "Denoising strategy", 
            "optional": true, 
            "type": "String", 
            "value-choices": [
                "no", 
                "nonaggr", 
                "aggr", 
                "both"
            ], 
            "value-key": "[DENOISING_STRATEGY]"
        }
    ], 
    "name": "ICA_AROMA", 
    "output-files": [
        {
            "description": "A folder containing the output files for ICA-AROMA (see ICA-AROMA manual, sec. 6). Should include a denoised fMRI data file (.nii.gz), text files indicating classification and feature results, and Melodic-related files (spatial maps in .nii.gz, a mask in .nii.gz, and the .ica output directory).", 
            "id": "folder_out", 
            "list": false, 
            "name": "Output folder", 
            "optional": false, 
            "path-template": "[OUTPUT_DIR]"
        }
    ], 
    "schema-version": "0.5", 
    "suggested-resources": {
        "walltime-estimate": 5000
    }, 
    "tool-version": "0.3.1"
}